## P3 Peer Review

+ Reviewer's name: Chantelle D'mello
+ Reviwee's name: Stephanie Gordon
+ URL to reviewee's Github repo: *<https://github.com/sg7788/e2/tree/master/p3>*

*Answer the following questions in regards to the student's project you are reviewing. Include code snippets in your answers when relevant.*


### Are you able to produce any errors or unexpected results?

At first glance, Stephanie's game works as expected. 

She used the input tag's max/min attribute very well to do some browser-side HTML form validation. Inputting strings, negative numbers, decimals, fractions, and random characters did not allow the game to progress. 

However, I was able to 'break' the game by simply pressing the 'submit' button without actually specifying a numerical guess i.e. with an empty input field. This resulted in an answer of 'Your guess is too low' each time. While this is technically correct, the code should have either stopped the game from progressing prior to submitting on an empty input field, or displayed a PHP-generated error message once the result was submitted. 

Adding a simple check like ```if (!empty($_GET['guess]))``` would eliminate this error. 

### Referencing the course nots on [Form design flow](https://hesweb.dev/e2/notes#/php/form-flow), describe the form design flow used in this project.

Stephanie used form flow Design C (as so did many of us, I'm guessing!) in her program. She created a basic form in ```index.php```, sent it to ```process.php``` to process, stored variables in a session that were then retrieved in ```index-controller.php```, and displayed back again in ```index.php``` using a series of conditional loops. 

### Are there any separation of concern issues (i.e. non-display specific logic in view files, display code in controller files)? 

Nope! Stephanie organised her code clearly. The ```process.php``` file accepts the form value and compares it to the number generated by the algorithm. The ```index-controller.php``` file then retrieves sets the variables stored in the session variables set in ```process.php```, while the ```index.php``` file uses a conditional loop to display different messages based on whether the user's guess was too high, too low, or spot on. 

### Are there aspects of the code that you feel were not self-evident and would benefit from comments?
Nope.

### List any/all built-in PHP methods used with a brief summary of what the method does

* $_GET = Gets the value of an field from and HTML form
* !isset = Checks to see if a variable exists/is set and not null
* session_start() = Starts a session in ```process.php```, and resumes the same session in index-controller.php
* header() = Sends an HTTP header/URL to an address passed as an argument
* $_SESSION = Sets PHP Session variables and is stored in the server
* rand(x,y) = Assigns a random integer between the min and max values specified


### Are there any parts of the code that you found interesting or taught you something new?
I liked how Stephanie stored her results in an array before storing it via $_SESSION. It was a clever way of minimising how many variables she'd have to retrieve over at ```index-controller.php```, while still getting all the necessary information across.

### Are there any parts of the code that you don't understand?
The code as a whole was pretty simple and written clearly. However, there was one stylistic choice that tripped me up. 

In ```process.php```, Stephanie sets a PHP session variable ```$_SESSION['answer']``` to store a randomly generated number (i.e. the computer's guess) that she doesn't actually use anywhere outside of the file. It isn't retrieved in index-controller.php, nor is it used in the view file ```index.php```. I am pretty new to the concept of sessions, but from what I know, it seems a superfluous use of the global session variable when she could have simply used a variable like ```$answer``` to store the same value. 

She also goes on to check if the session variable is set, using a conditional - ```if (!isset($_SESSION['answer']))``` - and then unset the variable via ```$_SESSION['answer'] = null;```. This seems an odd choice. Had she used a simple variable,she wouldn't have to check if it was set or unset it, and instead could have just assigned it different random values every time the game was run.

### Are there any best practices discussed in course material that you feel were not addressed in the code?
There are a couple of stylistic choices that I would have liked to see implemented, for the sake of brevity and efficiency. 

Stephanie's ```process.php``` file reads as follows:

```php
$guess = $_GET['guess'];  
if (!isset($_SESSION['answer'])) {
    $_SESSION['answer'] = rand(1,50);
} 
if ($guess == $_SESSION['answer']) {
    $winner = true;
    $_SESSION['results'] = null;
    $_SESSION['answer'] = null;
} else {
    $winner = false;
    if ($guess < $_SESSION['answer']) { 
        $status = 1;
    } else {
        $status = 2;
    } 
}
$results = [
    'winner' => $winner,  
    'status' => $status,  
    'guess' => $guess,    
];
$_SESSION['results'] = $results;
 ```

 I'd refactor that to read as below:

 ```php
(empty($_GET['guess'])) ? $error = "Please enter a value" : $guess = $_GET['guess'];

if ($guess) {
    $compAnswer = rand(1, 50);
    if ($guess == $compAnswer) {
        $winner = true;
    } else {
        ($guess < $compAnswer) ? $status = 1 : $status = 2;
    }
    $results = ['winner' => $winner, 'status' => $status, 'guess' => $guess];
}

$_SESSION['results'] = $results;
$_SESSION['error'] = $error;
```

The first part of the revised code addresses the issue of a null input value by running an error message if the field is empty. Yes, this means setting an additional session variable ```$_SESSION['error]```, but it also ensures that the game runs only when the user enters a valid numerical value. It uses a ternary operator to set ```$guess``` if validated or run a prescribed error message via ```$error``` if not. 

I then did away with the extraneous session variable ```$_SESSION['answer']``` and replaced it with a normal variable ```$compAnswer```. This allowed me to get rid of this line of code ```$_SESSION['answer'] = null```. I moved unsetting ```$_SESSION['results'] = null``` into ```index.controller.php``` where it belonged, which eliminated a further line of code.

I then set the winner variable to ```true``` only if the game was tied, and left it unset otherwise. This eliminated another line of code. 

Finally, I used a ternary operator to set the value of ```$status``` to round up the code. 

In ```index-controller.php```, I added in the necessary conditional to run the error code, followed by the requisite code to display it in ```index.php```. 

For the sake of clarity, I also went ahead and assigned the different keys in the ```$_SESSION['results']``` to actual variables, i.e. ``` $winner = $results['winner']``` and ```$status = $results['status']``` to make the code in ```index.php``` more readable and succinct. 

### Do you have any additional comments not covered in the above questions?
N/A